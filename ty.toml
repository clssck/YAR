# ty type checker configuration
# https://docs.astral.sh/ty/configuration/

[environment]
python-version = "3.13"

[src]
# Only exclude files that genuinely can't be type-checked (missing external deps)
exclude = [
    "reproduce/**",
    "examples/**",                            # demo files with env var handling
    "scripts/**",                             # utility scripts
    "yar/tools/yar_visualizer/**",            # imgui_bundle, moderngl not installed
    "**/graph_visual_with_html.py",           # pyvis not installed
    "**/modalprocessors_example.py",          # raganything not installed
    "**/raganything_example.py",              # raganything not installed
    "**/rerank_example.py",                   # references non-existent cohere_rerank
    "**/yar_azure_openai_demo.py",            # example file
    "yar/evaluation/**",                      # ragas optional dep
    "tests/test_prompt_*.py",                 # heavy mocking
    "tests/test_lightrag.py",                 # heavy AsyncMock usage
    "tests/test_operate.py",                  # heavy AsyncMock usage
    "tests/test_sync_wrapper.py",             # wrapper testing
    "tests/test_types.py",                    # pydantic model validation tests
    "tests/test_postgres_performance.py",     # mock embeddings
    "tests/test_base.py",                     # abstract class tests
    "tests/test_explain_routes.py",           # API route tests
    "tests/test_kreuzberg_adapter.py",        # document adapter tests
]

[rules]
# Only ignore things that are genuinely unfixable patterns
unresolved-import = "ignore"        # Optional deps not installed
conflicting-declarations = "ignore" # try/except ImportError pattern
redundant-cast = "ignore"           # Intentional casts for clarity
invalid-return-type = "warn"        # @sync_wrapper() decorated methods have empty bodies (impl in decorator)
empty-body = "ignore"               # @sync_wrapper() decorated stubs intentionally use `...` bodies
invalid-assignment = "warn"         # AsyncMock assignments in tests
